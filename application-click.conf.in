description "Application Launching for Click Applications"
author "Ted Gould <ted@canonical.com>"

instance ${APP_ID}

start on application-click-start
stop on application-end or desktop-end

env APP_ID
export APP_ID

env APP_URIS

apparmor switch ${APP_ID}

env APP_EXEC="echo Error"

pre-start exec @libexecdir@/click-exec ${APP_ID} "${APP_URIS}"

script
	cd ${HOME}/.cache/upstart-app-launch/desktop/${APP_ID}
	PATH=.:${PATH}
	${APP_EXEC}
end script

post-start exec @libexecdir@/zg-report-app open application://click-${APP_ID}.desktop
post-stop exec @libexecdir@/zg-report-app close application://click-${APP_ID}.desktop
